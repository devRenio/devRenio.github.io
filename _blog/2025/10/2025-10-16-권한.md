---
layout: blog
title: 권한
date: 2025-10-16 16:00:00 +0900
categories: [LECTURE, 서버프로그래밍]
permalink: /blog/posts/25-10-16-TIL-3
---

## 서버프로그래밍(황승연) 6주차 강의내용

### 파일 접근 권한 설정

**파일 속성**<br>
**ls -l** : 파일에 대한 상세한 정보 출력.

**-rw-rw-r-- 1 renio renio 54 5월 10 09:39 access.txt**<br>

<table style="width:75%" border="1">
 <thead>
  <tr>
   <th style="width:20%">속성 값</th>
   <th>의미</th>
  </tr>
 </thead>
 <tbody>
  <tr>
   <td>-</td>
   <td>파일의 종류 (-는 일반파일, d는 디렉터리)</td>
  </tr>
  <tr>
   <td>rw- r-- r--</td>
   <td>파일을 읽고(rw-), 쓰고(r--), 실행(r--)할 수 있는 접근 권한</td>
  </tr>
  <tr>
   <td>1</td>
   <td>하드 링크의 수</td>
  </tr>
  <tr>
   <td>renio</td>
   <td>파일 소유자의 로그인 ID</td>
  </tr>
  <tr>
   <td>renio</td>
   <td>파일 소유자의 그룹 이름</td>
  </tr>
  <tr>
   <td>54</td>
   <td>파일의 크기 (byte 단위)</td>
  </tr>
  <tr>
   <td>5월 10 09:39</td>
   <td>파일을 최종 수정한 일자와 시각</td>
  </tr>
  <tr>
   <td>access.txt</td>
   <td>파일명</td>
  </tr>
 </tbody>
</table>

**파일 접근 권한**<br>
접근 권한의 종류 : 읽기(r), 쓰기(w), 실행(x)<br>

<table style="width:75%" border="1">
 <thead>
  <tr>
   <th style="width:12%">접근 권한</th>
   <th>파일</th>
   <th>디렉터리</th>
  </tr>
 </thead>
 <tbody>
  <tr>
   <td>읽기 (r)</td>
   <td>해당 파일을 읽거나 복사 가능</td>
   <td>ls 명령으로 디렉터리의 목록을 확인 (옵션은 실행 권한이 있을 경우만 허용)</td>
  </tr>
  <tr>
   <td>쓰기 (w)</td>
   <td>파일을 수정, 이동, 삭제 가능 (디렉터리에 쓰기 권한 있어야함)</td>
   <td>해당 파일을 삭제하거나 생성할 수 있음</td>
  </tr>
  <tr>
   <td>실행 (x)</td>
   <td>셸 스크립트 또는 실행파일에 대한 실행 가능</td>
   <td>cd 명령 사용 가능하며 파일을 디렉터리로 이동 또는 복사 가능</td>
  </tr>
 </tbody>
</table>

**chmod [옵션] [권한] [파일명]** : 파일 접근 권한 변경.<br>
**-R 옵션** : 하위 디렉터리까지 모든 접근 권한 변경.

**심볼릭 모드** : 기호(rwx-)를 이용한 접근 권한 변경 방법.

<table style="width:75%" border="1">
 <thead>
  <tr>
   <th style="width:20%">구분</th>
   <th style="width:15%">문자/기호</th>
   <th>의미</th>
  </tr>
 </thead>
 <tbody>
  <tr>
   <td rowspan="4">사용자<br>카테고리 문자</td>
   <td>u</td>
   <td>파일 소유자</td>
  </tr>
  <tr>
   <td>g</td>
   <td>파일 소유자가 속한 그룹</td>
  </tr>
  <tr>
   <td>o</td>
   <td>파일 소유자와 그룹 이외의 기타 사용자</td>
  </tr>
  <tr>
   <td>a</td>
   <td>파일을 사용하려는 전체 사용자</td>
  </tr>
  <tr>
   <td rowspan="3">연산자 기호</td>
   <td>+</td>
   <td>파일 접근 권한 부여</td>
  </tr>
  <tr>
   <td>-</td>
   <td>파일 접근 권한 제거</td>
  </tr>
  <tr>
   <td>=</td>
   <td>파일 접근 권한 설정</td>
  </tr>
  <tr>
   <td rowspan="3">접근 권한 문자</td>
   <td>r</td>
   <td>파일 읽기권한</td>
  </tr>
  <tr>
   <td>w</td>
   <td>파일 쓰기 권한</td>
  </tr>
  <tr>
   <td>x</td>
   <td>파일 실행 권한</td>
  </tr>
 </tbody>
</table>

<table style="width:75%" border="1">
 <thead>
  <tr>
   <th style="width:17%">권한 조합</th>
   <th>의미</th>
  </tr>
 </thead>
 <tbody>
  <tr>
   <td>u+w</td>
   <td>파일 소유자에게 쓰기(w) 권한 부여</td>
  </tr>
  <tr>
   <td>u-w</td>
   <td>파일 소유자에게 쓰기(w) 권한 제거</td>
  </tr>
  <tr>
   <td>u=rwx</td>
   <td>파일 소유자에게 쓰기(w), 읽기(r), 실행(x) 권한 설정</td>
  </tr>
  <tr>
   <td>u+x,go+w</td>
   <td>소유자에게 실행(x) 권한 부여와 그룹 및 기타 사용자에게 쓰기(w) 권한 부여</td>
  </tr>
  <tr>
   <td>g+w</td>
   <td>파일 그룹에게 쓰기(w) 권한 부여</td>
  </tr>
  <tr>
   <td>g+wx</td>
   <td>파일 그룹에게 쓰기(w)와 실행(x) 권한 부여</td>
  </tr>
  <tr>
   <td>go+w</td>
   <td>그룹과 기타 사용자에게 쓰기(w) 권한 부여</td>
  </tr>
  <tr>
   <td>+wx</td>
   <td>파일을 사용하려는 모든 사용자에게 쓰기(w)와 실행(x) 권한 부여</td>
  </tr>
  <tr>
   <td>a+rwx</td>
   <td>모든 사용자에게 쓰기(w), 읽기(r), 실행(x) 권한 부여</td>
  </tr>
  <tr>
   <td>o-r</td>
   <td>파일 기타 사용자에게 읽기(r) 권한 제거</td>
  </tr>
 </tbody>
</table>

심볼릭 모드에서는 chmod 명령과 함께 기호를 조합하여 접근 권한 변경 가능.<br>
조합된 각 기호 사이를 공백 없는 콤마로 구분하여 여러 사용자의 권한을 한번에 변경 가능.<br>
입력 예 : chmod u+w,o-w access.txt<br>
소유자에게 읽기 권한 부여, 기타 사용자에게 읽기 권한 제거.

**숫자 모드** : 숫자(0-7)를 이용한 접근 권한 변경 방법.<br>
숫자 모드는 2진수 형태로 권한 여부를 설정하며, 각 사용자마다 8진수로 변환하여 관리.

<table style="width:75%" border="1">
 <thead>
  <tr>
   <th style="width:15%">권한 표기</th>
   <th style="width:13%">2진수</th>
   <th style="width:17%">8진수</th>
   <th>접근 권한 예시</th>
  </tr>
 </thead>
 <tbody>
  <tr>
   <td>rwx</td>
   <td>111</td>
   <td>7 (4+2+1)</td>
   <td>rwx rwx rwx &rarr; 777</td>
  </tr>
  <tr>
   <td>rw-</td>
   <td>110</td>
   <td>6 (4+2+0)</td>
   <td>rwx r-x r-x &rarr; 755</td>
  </tr>
  <tr>
   <td>r-w</td>
   <td>101</td>
   <td>6 (4+0+1)</td>
   <td>rw- rw- rw- &rarr; 666</td>
  </tr>
  <tr>
   <td>r--</td>
   <td>100</td>
   <td>4 (4+0+0)</td>
   <td>r-x r-x r-x &rarr; 555</td>
  </tr>
  <tr>
   <td>-wx</td>
   <td>011</td>
   <td>3 (0+2+1)</td>
   <td>rw- r-- r-- &rarr; 644</td>
  </tr>
  <tr>
   <td>-w-</td>
   <td>010</td>
   <td>2 (0+2+0)</td>
   <td>rwx --- --- &rarr; 700</td>
  </tr>
  <tr>
   <td>--x</td>
   <td>001</td>
   <td>1 (0+0+1)</td>
   <td>rw- r-- --- &rarr; 640</td>
  </tr>
  <tr>
   <td>---</td>
   <td>000</td>
   <td>0 (0+0+0)</td>
   <td>r-- --- --- &rarr; 400</td>
  </tr>
 </tbody>
</table>

입력 예 : chmod 755 access.txt<br>
소유자에게 모든 권한 부여, 그룹과 기타 사용자에게 읽기, 실행 권한 부여.<br><br>

### 관리자 권한 실행

**관리자 계정 접속**<br>
**$** : 일반 사용자 계정의 프롬프트 모양.<br>
**#** : 관리자 계정의 프롬프트 모양.<br>
**su [옵션] [계정명]** : 접속한 계정 변경.<br>

<table style="width:75%" border="1">
 <thead>
  <tr>
   <th style="width:15%">옵션</th>
   <th>설명</th>
  </tr>
 </thead>
 <tbody>
  <tr>
   <td>-c</td>
   <td>셸을 실행하지 않고 주어진 명령만 수행</td>
  </tr>
  <tr>
   <td>-s</td>
   <td>지정된 셸로 접속</td>
  </tr>
  <tr>
   <td>-, -l</td>
   <td>지정한 사용자의 환경변수를 적용하여 접속</td>
  </tr>
 </tbody>
</table>

입력 예 : su renio<br>
exit를 입력하여 원래 사용자 계정으로 복귀.<br>
입력 예 : su - root<br>
"-" 옵션을 사용하지 않는다면 root의 셸 환경변수를 가져오지 않음.<br>
온전한 관리자 계정 사용을 위해서는 - 옵션이 필요.

**sudo [옵션] [계정명]** : 관리자 권한으로 명령.<br>
일반 사용자 계정으로 접속된 상태에서 관리자 계정의 권한을 빌려서 명령을 수행.<br>
**-s 옵션** : 현재 디렉터리를 유지.<br>

입력 예 : sudo passwd root<br>
root 계정의 암호를 설정.

**사용자 계정 관리**<br>
**adduser [옵션] [생성할 계정명]** : 사용자 계정 생성.

<table style="width:75%" border="1">
 <thead>
  <tr>
   <th style="width:10%">옵션</th>
   <th>설명</th>
  </tr>
 </thead>
 <tbody>
  <tr>
   <td>-c</td>
   <td>사용자 이름 등 부가적인 설명 지정</td>
  </tr>
  <tr>
   <td>-d</td>
   <td>사용자 계정의 홈 디렉터리 지정</td>
  </tr>
  <tr>
   <td>-D</td>
   <td>기본 설정값을 출력하거나 설정</td>
  </tr>
  <tr>
   <td>-e</td>
   <td>유효기간 설정(YYYY-MM-DD)</td>
  </tr>
  <tr>
   <td>-f</td>
   <td>사용자 계정의 유효일자(-f-175 : 앞으로 175일간 사용 가능)</td>
  </tr>
  <tr>
   <td>-g</td>
   <td>사용자 계정의 로그인 기본그룹 GID 지정</td>
  </tr>
  <tr>
   <td>-G</td>
   <td>2차 그룹의 GID 지정</td>
  </tr>
  <tr>
   <td>-o</td>
   <td>사용자 계정의 UID 중복 허용</td>
  </tr>
  <tr>
   <td>-p</td>
   <td>사용자 계정의 패스워드</td>
  </tr>
  <tr>
   <td>-s</td>
   <td>사용자 계정의 기본 셸 지정</td>
  </tr>
  <tr>
   <td>-u</td>
   <td>사용자 계정의 UID 지정</td>
  </tr>
 </tbody>
</table>

ls /home 명령을 통해 사용자 계정 목록 확인 가능.<br>
/etc/passwd 파일에 사용자 계정의 정보가 저장됨.<br>

**member_001:x:1001:,,,:/home/member_001:/bin/bash**
순서대로 로그인 ID, 암호저장 항목, UID, GID, 설명, 홈 디렉터리, 로그인 셸.

**usermod [옵션] [계정명]** : 사용자 계정정보 수정.<br>

<table style="width:75%" border="1">
 <thead>
  <tr>
   <th style="width:10%">옵션</th>
   <th>설명</th>
  </tr>
 </thead>
 <tbody>
  <tr>
   <td>-c</td>
   <td>사용자 이름 등 부가적인 설명 수정</td>
  </tr>
  <tr>
   <td>-d</td>
   <td>사용자 계정의 홈 디렉터리 수정</td>
  </tr>
  <tr>
   <td>-e</td>
   <td>사용자 계정 만료일(유효기간) 수정 (YYYY-MM-DD)</td>
  </tr>
  <tr>
   <td>-f</td>
   <td>사용자 계정 비활성화 일자 수정</td>
  </tr>
  <tr>
   <td>-g</td>
   <td>사용자 계정의 로그인 기본그룹 GID 수정</td>
  </tr>
  <tr>
   <td>-G</td>
   <td>2차 그룹의 GID 수정</td>
  </tr>
  <tr>
   <td>-l</td>
   <td>사용자 계정 이름 변경</td>
  </tr>
  <tr>
   <td>-o</td>
   <td>사용자 계정의 UID 중복 허용</td>
  </tr>
  <tr>
   <td>-s</td>
   <td>사용자 계정의 기본 셸 수정</td>
  </tr>
  <tr>
   <td>-u</td>
   <td>사용자 계정의 UID 수정</td>
  </tr>
 </tbody>
</table>

입력 예 : usermod -u 2001 member_001<br>
member_001 계정의 UID를 2001로 변경.

**userdel [옵션] [계정명]** : 사용자 계정 삭제.<br>

<table style="width:75%" border="1">
 <thead>
  <tr>
   <th style="width:10%">옵션</th>
   <th>설명</th>
  </tr>
 </thead>
 <tbody>
  <tr>
   <td>-r</td>
   <td>홈 디렉터리 삭제</td>
  </tr>
  <tr>
   <td>-f</td>
   <td>사용 중인 계정 이름도 강제 삭제</td>
  </tr>
  <tr>
   <td>-rf</td>
   <td>홈 디렉터리 이외에 존재하는 파일 삭제</td>
  </tr>
 </tbody>
</table>

**find -user UID -exec rm -r {} \;**<br>
파일내용 중 UID를 찾아서 관련된 파일을 모두 삭제.
